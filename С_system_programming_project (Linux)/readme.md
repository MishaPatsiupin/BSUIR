###### Данный проект был оформлен в рамках курсового проекта по проедмету Операцианные системы и системное программирование.
###### Более подробное руководство, с описанием кода, руководством пользователя, примером работы программы (со скриншотами) [тут](/docs/Пояснительная записка, руководство пользователя.pdf)
## Программа  для  контроля  изменений  и  целостности группы файлов
### Основные функции утилиты:

1. **Обновление защищаемых файлов**:
   - Возможность легко обновлять файлы, которые находятся под защитой.

2. **Создание резервных копий**:
   - Автоматическое создание бэкапов файлов, которые помогут восстановить данные в случае их изменения или удаления.

3. **Проверка целостности файлов**:
   - Периодическая проверка файлов на наличие изменений с использованием хэш-сумм, рассчитанных разными алгоритмами (например, MD5, SHA-256).

4. **Восстановление файлов**:
   - В случае обнаружения изменений утилита должна автоматически восстанавливать файлы до их последней сохраненной версии.

5. **Уведомления о нарушениях**:
   - Система уведомлений о несанкционированных изменениях файлов, что позволяет пользователю своевременно реагировать на потенциальные угрозы.

### Дополнительные аспекты:

- **Интерфейс пользователя**: 
  - На выбор предоставляется интерфейс как через аргументы командной строки, так и графический.

- **Логирование событий**:
  - Регистрация всех операций, связанных с изменениями файлов и восстановлением, для анализа и отладки.

Основные подходы которые использовались:
 - Межпроцессорное взаимодействие (общая память)
 - Использование потоков
 - Использования библиотек Boost, OpenSSL - для криптографических алгоритмов


### Процесс инсталляции

<details>
<summary>Скрыть/Раскрыть процесс установки</summary>

0. Требования к программному обеспечению:
Для успешной работы программы необходимо, чтобы на системе (Linux) были установлены следующие компоненты:

- <details><summary> **CMake**</summary> версии 3.22 или выше
```
sudo apt update
sudo apt install cmake
```
or
```
sudo pacman –Syu 
sudo pacman –S cmake 
```
</details>

- <details><summary> **Компилятор C++** </summary>, поддерживающий стандарт C++17
```
sudo apt update  
sudo apt install g++ 
```
or
```
sudo pacman –Syu  
sudo pacman –S gcc
```
</details>

- <details><summary> **Набор библиотек Boost** </summary>
```
sudo apt update 
sudo apt install libboost–all–dev
```
or
```
sudo pacman –Syu 
sudo pacman –S boost
```
</details>

- <details><summary> **Библиотека Jsoncpp** </summary>
```
sudo apt update 
sudo apt install libjsoncpp–dev
```
or
```
sudo pacman –Syu 
sudo pacman –S jsoncpp
```
</details>

- <details><summary> **Библиотека OpenSSL** </summary>
```
sudo apt update 
sudo apt install libssl–dev
```
or
```
sudo pacman –Syu 
sudo pacman –S openssl
```
</details>

- <details><summary> **Утилита pkg-config** </summary>
```
sudo apt update 
sudo apt install pkg–config
```
or
```
sudo pacman –Syu 
sudo pacman –S pkg–config
```
</details>

1. Перейдите в каталог `front_sfc`: 
   ```bash
   cd front_sfc 
   ```

2. Создайте каталог для сборки и перейдите в него: 
   ```bash
   mkdir build 
   cd build 
   ```

3. Запустите CMake для генерации Makefile: 
   ```bash
   cmake .. 
   ```

4. Запустите make для сборки проекта: 
   ```bash
   make 
   ```

Проделайте аналогичные действия для установки программы `back_sfc`.

</details>


Управление  и  настройка основной  программой  back_sfc, осуществляется через утилиту front_sfc. Взаимодействие с утилитой front_sfc может  осуществляться  двумя  способами – ключами,  или  примитивным  графическим интерфейсом. 

<details>
<summary>Скрыть/Раскрыть описание интерфейса через ключи командной строки</summary>

Рассмотрим  взаимодействие  с  использованием  ключей. Для  этого утилита запускается, из каталога build, в виде: 
   ```
./front_sfc <ключ> <параметр> 
   ```
Треугольные  скобки  опускаются,  параметр  указывается  при необходимости.  Ключом  являются  следующие  строки,  приведены  с описанием: 

1. ``` enable ``` Включение защиты, с этого момента начнется наблюдение за файлами,  будет  создана  резервная  копия.
2. ``` disable ``` Выключение  защиты,  снятие  контроля  над  файлами, автоматическое  восстановление измененных, удаленных файлов.
3. ``` file-info ``` Окно справки, в нем содержится информация о пути к защищаемой директории, состояние основной  программы, интервал между проверками  хэш–сумм,  тип  восстановления  с  резервной  копии, предпочтительный алгоритм хеширования, настройки уведомлений.
4. ``` force–restore ``` Принудительное  восстановление  файлов,  согласно выбранного типу. Восстановление происходит только с включенной защитой.
5. ``` help ``` Открытие  справки,  включающей  в  себя  описание  ключей  и дополнительные  требования  по  вводу.
![Справка](/docs/pic/--help.png)
6. ``` path <string> ``` Установка пути к директории, требующей защиты.
7. ``` interval <int> ``` Установка  временного  интервала  в  минутах проверки хэш–сумм файлов.
8. ``` backup–type <string> ``` Установка  типа  восстановления  после резервного  копирования.
9. ``` hash–algorithm <string> ```  Установка приоритетного алгоритма для вычисления, и сверки хеш–сумм.
10. ``` notification–channel <string> ``` Установка канала уведомлений, или  их  отключение.
При  введении несуществующего  ключа  или недоступного  аргумента 
ключа, возникнет исключение:
![Исключение](/docs/pic/error_input.png)

</details>


<details>
<summary>Скрыть/Раскрыть описание интерфейса через графический интерефйс</summary>

Взаимодействие при помощи графического интерфейса осуществляется при запуске утилиты, из каталога build, без дополнительных ключей:
```
./front_sfc 
```
![](/docs/pic/main_menu.png)

Описание пунктов меню:
1. ``` Enable  protection ```  Включение защиты. Выбора этого пункта  означает 
что  при  выходе  с  утилиты,  программа  back_sfc в  соответствиями  с 
выставленными настройками, или настройками по умолчанию начнет свою 
деятельность.
2. ``` Disable protection ``` Снятие  защиты. Охраняемый  каталог  будет возращен в свое первоначальное состояние, файлы в каталоге больше не будут подвергаться мониторингу выявляющему изменения, шифрованная резервная копия  будет  удалена.  Оставшиеся  пользовательские  настройки  будут сохранены. 
3. ``` Get information about files ``` Просмотр текущих настроек, таких как: 
 – путь к наблюдаемой директории; 
 – состояние защиты; 
 – интервал проверки хеш–сумм файлов; 
 – вид резервного копирования; 
 – приоритетный алгоритм при сравнении хеш–сумм; 
 – канал уведомлений. 
4. ``` Force file restoration ``` Принудительное  восстановление  данных  с резервной  копии,  применяется  когда  необходимо  обратиться  к первоначальным файлам, после их изменения, при этом не прекращая защиты. 
5. ``` Configure  protection ``` Настроить  защиту.  При  выборе  этого  пункта, откроется подменю. Подменю будет описано ниже.
![Подменю](/docs/pic/menu_2.png)
6. ``` Show help ``` Показ справки, содержащей информацию о всех пунктах, и разделах меню.
7. ``` Exit the program ``` Выход из утилиты front_sfc. Корректный необходим чтобы сохранить  настройки  вамих параметров,  и  передачи  в  back_sfc. 

Описание пунктов подменю, изображённого на рисунке ранее:
1. ``` Specify  the  file  path ``` Указать путь к охраняемой директории.  После указания пути, будет произведена проверка на его существование. Значением по умолчанию является домашняя директория.
2. ``` Specify  the  file  check  interval ``` Указать  интервал  сверки  хеш–сумм файлов,  в  охраняемой  директории,  а  также  выявление  новых/удаленных файлов, при этом выводится системное уведомление. Интервал указывается в минутах, в пределах от 1 до 180 минут. По умолчанию интервал выставлен на проверку каждые 3 минуты.
3. ``` Specify  the  backup  type ``` Указать  тип  резервного  копирования,  full (полное),  или  differential (частичное).  Отличия  заключается  в  порядке восстановления файлов. При полном охраняемая директория будет стерта, и создана из резервной копии, при частичном дополнена резервной копией, то есть,  новые,  добавленные  файлы  в  период  действия  защиты останутся, предупреждения  о  существовании  таковых  выводится  не  перестанут.  По умолчанию  тип  указан  как  полное  восстановление.
4. ``` Specify  the  hashing  algorithm ``` Указать  приоритетный  алгоритм  для сравнения  хеш–сумм  файлов,  SHA256  или MD5. По умолчанию приоритет отдается  алгоритму  MD5.
5. ``` Specify the notification channel ``` Настроить  канал  уведомлений – no/system. В текущей версии программы доступна возможность использовать системные уведомления, или отключить их (за исключением критических). По умолчанию  уведомление  представлены в  виде  системных. 
6. ``` Return to main menu ``` Вернуться к основному меню. 

</details>


<details>
<summary>Скрыть/Раскрыть последовательность действий пользователя</summary>

Для использования программы необходимо выполнить следующие шаги:

1. **Проверить соответствие требованиям:**
   - Убедитесь, что все необходимые требования к программному обеспечению выполнены. 
   - В случае несоответствия произведите установку необходимого программного обеспечения.

2. **Инсталляция программ:**
   - Установите программы `front_sfc` и `back_sfc`.

3. **Запуск программы `front_sfc`:**
   - Запустите программу `front_sfc`.

4. **Настройка параметров:**
   - Настройте параметры посредством интерфейса, описанного в подпункте 5.3.1 настоящей пояснительной записки.

5. **Запуск программы `back_sfc`:**
   - Запустите программу `back_sfc`.

6. **Изменение настроек (при необходимости):**
   - При необходимости измените настройки мониторинга или режим работы программы, повторив шаги 3 и 4.

## Завершение работы программ

- Программа `front_sfc` завершается при выборе соответствующего пункта в главном меню.
- Программа `back_sfc` продолжает работу в фоновом режиме до перезагрузки машины. 
- При последующей загрузке машины будет достаточно выполнить только шаг 4.
